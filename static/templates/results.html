{% load staticfiles %}
{% load filters %}
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Результаты: {{ game.name }}</title>
<meta name="description" content="">
<meta name="author" content="">

<!-- Favicons
    ================================================== -->
<link rel="apple-touch-icon" sizes="57x57" href="{% static "img/favicon/apple-icon-57x57.png" %}">
<link rel="apple-touch-icon" sizes="60x60" href="{% static "img/favicon/apple-icon-60x60.png" %}">
<link rel="apple-touch-icon" sizes="72x72" href="{% static "img/favicon/apple-icon-72x72.png" %}">
<link rel="apple-touch-icon" sizes="76x76" href="{% static "img/favicon/apple-icon-76x76.png" %}">
<link rel="apple-touch-icon" sizes="114x114" href="{% static "img/favicon/apple-icon-114x114.png" %}">
<link rel="apple-touch-icon" sizes="120x120" href="{% static "img/favicon/apple-icon-120x120.png" %}">
<link rel="apple-touch-icon" sizes="144x144" href="{% static "img/favicon/apple-icon-144x144.png" %}">
<link rel="apple-touch-icon" sizes="152x152" href="{% static "img/favicon/apple-icon-152x152.png" %}">
<link rel="apple-touch-icon" sizes="180x180" href="{% static "img/favicon/apple-icon-180x180.png" %}">
<link rel="icon" type="image/png" sizes="192x192"  href="{% static "img/favicon/android-icon-192x192.png" %}">
<link rel="icon" type="image/png" sizes="32x32" href="{% static "img/favicon/favicon-32x32.png" %}">
<link rel="icon" type="image/png" sizes="96x96" href="{% static "img/favicon/favicon-96x96.png" %}">
<link rel="icon" type="image/png" sizes="16x16" href="{% static "img/favicon/favicon-16x16.png" %}">

<!-- Bootstrap -->
<link rel="stylesheet" type="text/css"  href="{% static "css/bootstrap.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "fonts/font-awesome/css/font-awesome.css" %}">

<!-- Stylesheet
    ================================================== -->
<link rel="stylesheet" type="text/css" href="{% static "css/style.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "css/nivo-lightbox/nivo-lightbox.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "css/nivo-lightbox/default.css" %}">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Raleway:300,400,500,600,700,800,900" rel="stylesheet">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">
<!-- Navigation
    ==========================================-->
<nav id="menu" class="navbar navbar-default navbar-fixed-top">
  <div class="container"> 
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
      <a class="navbar-brand page-scroll" href="/">inter oves locum praesta</a> </div>
    
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#page-top" class="page-scroll">Наверх</a></li>
      </ul>
    </div>
    <!-- /.navbar-collapse --> 
  </div>
</nav>
<!-- Header -->
<header id="header">
  <div class="intro {{ mode }}-results-intro">
    <div class="container">
      <div class="row">
        <div class="col-md-8 col-md-offset-2 intro-text">
          <h1>{{ game.name }}</h1>
          {% if game.theme %}<h3>Тема: {{ game.theme }}</h3>{% endif %}
          {% if game.author %}<h3>Автор: {{ game.author }}</h3>{% endif %}
      </div>
    </div>
  </div>
</header>  
<div id="results-table" class="text-center">
  <div class="container">
    <div class="col-md-10 col-md-offset-1 section-title">
      <h2>{% if mode == 'tournament' %}Турнирная таблица{% else %}Общая таблица{% endif %}</h2>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-md-8 col-md-offset-2 results-description">
        {% if mode == 'tournament' %}
          В турнирной таблице учитываются только посылки во время игры: с {{ game.start_time|date:'H:i' }} до {{ game.end_time|date:'H:i' }} {{ game.start_time|date:'d E Y' }}.
        {% else %}
          В общей таблице учитываются все посылки, посланные и во время игры, и после.
        {% endif %}
      </div>
    </div>
  </div>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <table class="table table-bordered table-results">
          <tr>
            <th rowspan="2" scope="col" class="cell-header">Команда</th>
            <th rowspan="2" scope="col" class="cell-header">Сумма</th>
            <th rowspan="2" scope="col" class="cell-header">Время</th>
            {% for task_group in task_groups %}
                <th colspan="{{ task_group.get_n_tasks }}" scope="col" class="cell-header">{{ task_group.number }}. {{ task_group.name }}</th>
            {% endfor %}
          </tr>
          <tr>
            {% for task_group in task_groups %}
                {% for task in task_group_to_tasks|get_item:task_group.number %}
                <th scope="col" class="cell-header">{{ task.number }}</th>
                {% endfor %}
            {% endfor %}
          </tr>
          {% for team in teams_sorted %}
            <tr>
                <td scope="row" class="row-header"> {{ team.name }} </td>
                <td class="row-header"> {{ team_to_score|get_item:team|minimize_digits }} </td>
                <td class="row-header"> {{ team_to_max_best_time|get_item:team|date:'H:i' }} </td>
                {% for attempts_info in team_to_list_attempts_info|get_item:team %}
                  <td class="cell cell-{% if attempts_info.best_attempt.status %}{{ attempts_info.best_attempt.status|get_lower_status }}{% else %}no{% endif %}">
                    {% if attempts_info.get_n_attempts > 0 %}
                      {{ attempts_info.best_attempt.points|minimize_digits }}
                    {% endif %}
                  </td>
                {% endfor %}
            </tr>
          {% endfor %}
        </table>
      </div>
    </div>
  </div>
</div>
{% include "header.html" %}
<script type="text/javascript" src="{% static "js/jquery.1.11.1.js" %}"></script> 
<script type="text/javascript" src="{% static "js/bootstrap.js" %}"></script> 
<script type="text/javascript" src="{% static "js/SmoothScroll.js" %}"></script> 
<script type="text/javascript" src="{% static "js/nivo-lightbox.js" %}"></script> 
<script type="text/javascript" src="{% static "js/jqBootstrapValidation.js" %}"></script> 
<script type="text/javascript" src="{% static "js/main.js" %}"></script>
</body>
</html>
